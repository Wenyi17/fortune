<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¡”ç½—å åœï¼ˆå§»ç¼˜/å­¦ä¸š/è´¢è¿/å¥åº·ï¼‰</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:#111; color:#fff; margin:0; padding:20px;}
    h1{font-size:22px; margin:0 0 12px;}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin:12px 0;}
    select, button, input{font-size:16px; padding:10px 12px; border-radius:10px; border:1px solid #333; background:#1b1b1b; color:#fff;}
    button{cursor:pointer;}
    .card{background:#171717; border:1px solid #2a2a2a; border-radius:16px; padding:14px; margin-top:12px;white-space: pre-line;line-height:1.6;}
    .muted{color:#bbb; font-size:13px; line-height:1.4;}
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;}
    .kpi{background:#141414; border:1px solid #2a2a2a; border-radius:14px; padding:12px;}
    .kpi b{display:block; font-size:14px; color:#ddd;}
    .bar{height:10px; background:#2a2a2a; border-radius:999px; overflow:hidden; margin-top:8px;}
    .bar > div{height:100%; background:#fff; width:0%;}
    .score{font-size:20px; margin-top:6px;}
    .pill{display:inline-block; padding:4px 10px; border:1px solid #333; border-radius:999px; font-size:12px; color:#ccc; margin-left:6px;}
    .hr{height:1px; background:#2a2a2a; margin:12px 0;}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas; font-size:12px; color:#aaa;}
  </style>
</head>
<body>
  <h1>ğŸƒ å¡”ç½—å åœ</h1>
  <div class="muted">
    éšæœºæŠ½ç‰Œï¼ˆç¬¦åˆå¡”ç½—æœºåˆ¶ï¼‰ï¼›åˆ†æ•°ä¸è§£è¯»æ¥è‡ªå›ºå®šç‰Œä¹‰åº“ä¸æ˜ å°„è§„åˆ™ã€‚è¾“å‡ºèšç„¦ï¼šå§»ç¼˜ / å­¦æœ¯å‰é€” / è´¢è¿ / å¥åº·ã€‚
  </div>

  <div class="row">
    <select id="spread">
      <option value="one">å•ç‰Œï¼ˆå¿«é€Ÿï¼‰</option>
      <option value="three">ä¸‰ç‰Œï¼ˆè¿‡å»/ç°åœ¨/æœªæ¥ï¼‰</option>
    </select>

    <select id="focus">
      <option value="balanced">ç»¼åˆï¼ˆå››é¡¹å‡è¡¡ï¼‰</option>
      <option value="love">å§»ç¼˜ä¼˜å…ˆ</option>
      <option value="academic">å­¦æœ¯ä¼˜å…ˆ</option>
      <option value="wealth">è´¢è¿ä¼˜å…ˆ</option>
      <option value="health">å¥åº·ä¼˜å…ˆ</option>
    </select>

    <button onclick="draw()">æŠ½ç‰Œ</button>
  </div>

  <div class="card" id="result" style="display:none;"></div>

<script>
/**
 * è¯´æ˜ï¼š
 * - è¿™é‡Œç”¨â€œå¤§é˜¿å°”å¡çº³ 22å¼ â€åš MVPã€‚ä½ è¦ 78 å¼ æˆ‘ä¹Ÿèƒ½ç»™ä½ æ‰©åˆ°å…¨ç‰Œåº“ã€‚
 * - æ¯å¼ ç‰Œï¼šåŸºç¡€å››é¡¹åˆ† (0-100)ï¼Œæ­£ä½/é€†ä½æ–‡æ¡ˆ
 * - æœ€ç»ˆåˆ†ï¼šå¯¹æŠ½åˆ°çš„ç‰ŒåšåŠ æƒå¹³å‡ï¼ˆå•ç‰Œ=è¯¥ç‰Œï¼Œä¸‰ç‰Œ=è¿‡å»0.25 ç°åœ¨0.5 æœªæ¥0.25ï¼‰
 * - focus ä¼šæ”¹å˜åŠ æƒï¼ˆæ¯”å¦‚å§»ç¼˜ä¼˜å…ˆä¼šç»™ love æ›´é«˜æƒé‡ï¼Œä½†ä¸å¼•å…¥éšæœºï¼‰
 */

const MAJOR = [
  { name:"æ„šè€…", upright:"æ–°å¼€å§‹ä¸å°è¯•ï¼Œå…ˆè¡ŒåŠ¨å†ä¿®æ­£ã€‚", reversed:"å†²åŠ¨ä¸ä¸ç¡®å®šï¼Œå…ˆç¨³ä½èŠ‚å¥ã€‚",
    base:{love:70, academic:68, wealth:60, health:65} },
  { name:"é­”æœ¯å¸ˆ", upright:"èµ„æºåˆ°ä½ï¼Œé€‚åˆä¸»åŠ¨å‡ºå‡»ä¸è¡¨è¾¾ã€‚", reversed:"åˆ†å¿ƒä¸å¤¸å¤§ï¼Œå…ˆèšç„¦ä¸€ä¸ªç›®æ ‡ã€‚",
    base:{love:66, academic:78, wealth:72, health:62} },
  { name:"å¥³ç¥­å¸", upright:"ç›´è§‰å¼ºï¼Œé€‚åˆç ”ç©¶ä¸ç­‰å¾…ä¿¡æ¯æ˜æœ—ã€‚", reversed:"ç–‘è™‘è¿‡å¤šï¼Œå…ˆæŠŠäº‹å®æŸ¥æ¸…ã€‚",
    base:{love:62, academic:82, wealth:58, health:66} },
  { name:"å¥³çš‡", upright:"æ»‹å…»ä¸æˆé•¿ï¼Œå…³ç³»/æˆæœæ›´å®¹æ˜“å¼€èŠ±ã€‚", reversed:"è¿‡åº¦æ”¾çºµæˆ–æ¶ˆè€—ï¼Œæ³¨æ„è¾¹ç•Œä¸è‡ªå¾‹ã€‚",
    base:{love:80, academic:70, wealth:74, health:72} },
  { name:"çš‡å¸", upright:"ç»“æ„ä¸æŒæ§ï¼Œé€‚åˆåˆ¶å®šè§„åˆ™ä¸æ¨è¿›ã€‚", reversed:"æ§åˆ¶æ¬²è¿‡å¼ºï¼Œå­¦ä¼šåå•†ä¸æ”¾æ‰‹ã€‚",
    base:{love:60, academic:74, wealth:78, health:64} },
  { name:"æ•™çš‡", upright:"ä¼ ç»Ÿè·¯å¾„ç¨³å¦¥ï¼Œé€‚åˆæ±‚æ•™/è·Ÿå¯¼å¸ˆèµ°ã€‚", reversed:"è¿‡åº¦ä¾èµ–æƒå¨ï¼Œä¿ç•™ç‹¬ç«‹åˆ¤æ–­ã€‚",
    base:{love:64, academic:76, wealth:62, health:66} },
  { name:"æ‹äºº", upright:"é‡è¦é€‰æ‹©ä¸å¥‘åˆï¼Œæ²Ÿé€šèƒ½å¸¦æ¥è¿›å±•ã€‚", reversed:"æ‘‡æ‘†ä¸è¯¯ä¼šï¼Œå…ˆæŠŠéœ€æ±‚è¯´æ¸…ã€‚",
    base:{love:88, academic:66, wealth:64, health:62} },
  { name:"æˆ˜è½¦", upright:"æ¨è¿›å¾ˆå¿«ï¼Œé€‚åˆå†²åˆºä¸æ‹¿ç»“æœã€‚", reversed:"èŠ‚å¥å¤±æ§ï¼Œå…ˆæŠŠä¼˜å…ˆçº§æ’å¥½ã€‚",
    base:{love:62, academic:78, wealth:70, health:60} },
  { name:"åŠ›é‡", upright:"è€åŠ›ä¸æ¸©å’Œçš„æŒæ§ï¼Œé•¿æœŸæ›´æœ‰åˆ©ã€‚", reversed:"æƒ…ç»ªæ¶ˆè€—ï¼Œæ³¨æ„ä¼‘æ¯ä¸æ¢å¤ã€‚",
    base:{love:70, academic:72, wealth:66, health:78} },
  { name:"éšè€…", upright:"ç‹¬å¤„ä¸æ·±è€•ï¼Œé€‚åˆé—­å…³å­¦ä¹ ä¸æ•´ç†ã€‚", reversed:"å°é—­è¿‡åº¦ï¼Œé€‚å½“å¯»æ±‚æ”¯æŒã€‚",
    base:{love:54, academic:84, wealth:58, health:70} },
  { name:"å‘½è¿ä¹‹è½®", upright:"å±€åŠ¿è½¬æœºï¼ŒæŠ“ä½çª—å£æœŸã€‚", reversed:"æ³¢åŠ¨åŠ å¤§ï¼Œå…ˆç¨³ä½åŸºæœ¬ç›˜ã€‚",
    base:{love:68, academic:70, wealth:70, health:66} },
  { name:"æ­£ä¹‰", upright:"å› æœæ¸…æ™°ï¼ŒæŒ‰è§„åˆ™åšäº‹æœ‰å›æŠ¥ã€‚", reversed:"åå·®ä¸ä¸å¹³è¡¡ï¼Œå…ˆæŠŠè´¦ç®—æ¸…ã€‚",
    base:{love:64, academic:74, wealth:68, health:66} },
  { name:"å€’åŠäºº", upright:"æ¢è§’åº¦ä¸å»¶è¿Ÿæ»¡è¶³ï¼Œå…ˆæŠ•èµ„èƒ½åŠ›ã€‚", reversed:"åœæ»æ‹–å»¶ï¼Œåšä¸€ä¸ªå¯æ‰§è¡Œçš„å°åŠ¨ä½œã€‚",
    base:{love:58, academic:72, wealth:54, health:66} },
  { name:"æ­»ç¥", upright:"ç»“æŸæ—§æ¨¡å¼ï¼Œè¿æ¥é‡å¯ã€‚", reversed:"ä¸è‚¯æ”¾ä¸‹ï¼Œåå¤å†…è€—ã€‚",
    base:{love:60, academic:66, wealth:62, health:62} },
  { name:"èŠ‚åˆ¶", upright:"å¹³è¡¡ä¸ä¿®å¤ï¼Œå¾ªåºæ¸è¿›æœ€ç¨³ã€‚", reversed:"è¿‡åº¦æç«¯ï¼Œè°ƒæ•´ä½œæ¯ä¸èŠ‚å¥ã€‚",
    base:{love:72, academic:72, wealth:64, health:80} },
  { name:"æ¶é­”", upright:"æ¬²æœ›ä¸ç»‘å®šï¼Œè­¦æƒ•æ²‰è¿·ä¸äº¤æ˜“ã€‚", reversed:"æŒ£è„±æŸç¼šï¼Œé‡å»ºè‡ªæ§ã€‚",
    base:{love:56, academic:58, wealth:66, health:52} },
  { name:"é«˜å¡”", upright:"çªå˜ä¸æ‰“ç ´ï¼Œå…ˆæ­¢æŸå†é‡å»ºã€‚", reversed:"å±æœºç¼“è§£ä½†ä»éœ€ä¿®è¡¥æ¼æ´ã€‚",
    base:{love:48, academic:60, wealth:52, health:50} },
  { name:"æ˜Ÿæ˜Ÿ", upright:"å¸Œæœ›ä¸ç–—æ„ˆï¼Œé•¿æœŸè¶‹åŠ¿å‘å¥½ã€‚", reversed:"ä¿¡å¿ƒä¸è¶³ï¼Œå…ˆåšå°çš„æ­£åé¦ˆã€‚",
    base:{love:76, academic:74, wealth:66, health:78} },
  { name:"æœˆäº®", upright:"è¿·é›¾ä¸æƒ…ç»ªï¼Œä¿¡æ¯ä¸å…¨å…ˆè§‚å¯Ÿã€‚", reversed:"çœŸç›¸æµ®å‡ºï¼Œé€‚åˆåšå†³å®šã€‚",
    base:{love:58, academic:62, wealth:58, health:60} },
  { name:"å¤ªé˜³", upright:"æ¸…æ™°ä¸æˆåŠŸï¼Œèƒ½è§åº¦é«˜ã€‚", reversed:"çŸ­æš‚å—é˜»ï¼Œåˆ«è¿‡åº¦æ‚²è§‚ã€‚",
    base:{love:82, academic:80, wealth:78, health:76} },
  { name:"å®¡åˆ¤", upright:"å¤ç›˜ä¸å¬å”¤ï¼Œé€‚åˆæäº¤/ç­”è¾©/è½¬æŠ˜ã€‚", reversed:"é€ƒé¿å¤ç›˜ï¼Œé”™è¿‡å…³é”®æœºä¼šã€‚",
    base:{love:66, academic:82, wealth:68, health:64} },
  { name:"ä¸–ç•Œ", upright:"å®Œæˆä¸æ”¶å®˜ï¼Œé˜¶æ®µæ€§æˆæœè½åœ°ã€‚", reversed:"ä¸´é—¨å·®ä¸€æ­¥ï¼ŒæŠŠç»†èŠ‚è¡¥é½ã€‚",
    base:{love:78, academic:78, wealth:76, health:72} }
];

// é€†ä½å¤„ç†ï¼šåˆ†æ•°å›ºå®šæ‰£/åŠ ï¼Œä¸ç”¨éšæœº
function applyReversal(scoreObj, reversed){
  if(!reversed) return {...scoreObj};
  // é€†ä½ï¼šæ•´ä½“ -8ï¼Œå¥åº·é¢å¤– -2ï¼ˆä¿å®ˆï¼‰ï¼Œå­¦æœ¯ -4ï¼ˆé¿å…è¿‡æ‹Ÿåˆï¼‰
  return {
    love: clamp(scoreObj.love - 8, 0, 100),
    academic: clamp(scoreObj.academic - 4, 0, 100),
    wealth: clamp(scoreObj.wealth - 8, 0, 100),
    health: clamp(scoreObj.health - 10, 0, 100)
  };
}

function clamp(x, a, b){ return Math.max(a, Math.min(b, x)); }

function pickCard(){
  const idx = Math.floor(Math.random() * MAJOR.length);
  const reversed = Math.random() < 0.35; // é€†ä½æ¦‚ç‡å›ºå®š 35%
  const c = MAJOR[idx];
  const base = applyReversal(c.base, reversed);
  const text = reversed ? c.reversed : c.upright;
  return { name:c.name, reversed, base, text };
}

function weightedAvg(cards, weights){
  const sumW = weights.reduce((a,b)=>a+b,0);
  const agg = {love:0, academic:0, wealth:0, health:0};
  cards.forEach((c,i)=>{
    const w = weights[i]/sumW;
    agg.love += c.base.love*w;
    agg.academic += c.base.academic*w;
    agg.wealth += c.base.wealth*w;
    agg.health += c.base.health*w;
  });
  return {
    love: Math.round(agg.love),
    academic: Math.round(agg.academic),
    wealth: Math.round(agg.wealth),
    health: Math.round(agg.health)
  };
}

// focusï¼šä¸æ˜¯éšæœºï¼Œæ˜¯ç¡®å®šæ€§åœ°æ”¹å˜â€œè§£é‡Šä¾§é‡â€ä¸å‘ˆç°
function focusLabel(v){
  return ({
    balanced:"ç»¼åˆ",
    love:"å§»ç¼˜",
    academic:"å­¦æœ¯å‰é€”",
    wealth:"è´¢è¿",
    health:"å¥åº·"
  })[v] || "ç»¼åˆ";
}

function advice(score, domain){

  /* ===== å§»ç¼˜ ===== */
  if(domain==="love"){

    if(score>=90) return `
å§»ç¼˜èƒ½é‡å¤„åœ¨æå¼ºå…±æŒ¯åŒºé—´ï¼Œè±¡å¾å…³ç³»æ¨è¿›ä¸å®šå‹çš„é«˜æ¦‚ç‡çª—å£ã€‚æ— è®ºæ˜¯å·²æœ‰å…³ç³»æ·±åŒ–ï¼Œè¿˜æ˜¯æ–°å…³ç³»å»ºç«‹ï¼Œéƒ½å…·å¤‡è¾ƒé«˜åŒ¹é…åº¦ä¸å¤–éƒ¨åŠ©åŠ›ã€‚

æ­¤é˜¶æ®µæœ€å…³é”®çš„æ˜¯â€œæ˜ç¡®æ‰¿è¯ºä¸ç»“æ„â€ã€‚é€‚åˆè®¨è®ºé•¿æœŸè§„åˆ’ã€ç”Ÿæ´»èŠ‚å¥ä¸æœªæ¥å®‰æ’ï¼ŒæŠŠå…³ç³»ä»æƒ…ç»ªè¿æ¥æ¨è¿›åˆ°ç°å®ååŒã€‚åŒæ—¶ä¹Ÿè¦é¿å…è¿‡åº¦ç†æƒ³åŒ–ï¼Œå¯¹æ–¹çœŸå®çŠ¶æ€ä»éœ€è§‚å¯Ÿä¸ç¡®è®¤ã€‚

æ€»ä½“å±äºæƒ…æ„Ÿå‘å±•é»„é‡‘æœŸï¼Œä½†ç»è¥è´¨é‡å†³å®šæœ€ç»ˆç¨³å®šåº¦ã€‚
`;

    if(score>=80) return `
å½“å‰æ„Ÿæƒ…è¿åŠ¿å¤„åœ¨æ˜æ˜¾ä¸Šå‡åŒºé—´ï¼Œå…³ç³»äº’åŠ¨é¢‘ç‡ä¸æƒ…ç»ªå›åº”åº¦å‡æœ‰æå‡ã€‚é€‚åˆå¢åŠ ç›¸å¤„å¯†åº¦ï¼Œé€šè¿‡çœŸå®äº’åŠ¨åŠ æ·±ç†è§£ã€‚

è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ¨è¿›ä½†ä»éœ€ç»è¥çš„é˜¶æ®µã€‚æ²Ÿé€šè´¨é‡ã€è¾¹ç•Œè¡¨è¾¾ä¸èŠ‚å¥åŒ¹é…å°¤ä¸ºå…³é”®ã€‚åªè¦é¿å…æƒ…ç»ªçŒœæµ‹ä¸è¿‡åº¦è¯•æ¢ï¼Œå…³ç³»ç¨³å®šæ€§ä¼šé€æ­¥å¢å¼ºã€‚

æ•´ä½“å‘ˆç°æ¸©å’Œæ‰©å¼ è¶‹åŠ¿ã€‚
`;

    if(score>=70) return `
å§»ç¼˜è¿åŠ¿å¤„åœ¨å¯å‘å±•åŒºé—´ï¼Œä½†æ¨è¿›èŠ‚å¥éœ€è°¨æ…æ§åˆ¶ã€‚äº’åŠ¨å­˜åœ¨ï¼Œä½†ç¨³å®šåº¦ä»éœ€æ—¶é—´éªŒè¯ã€‚

æ­¤é˜¶æ®µæ›´é€‚åˆé€šè¿‡æ²Ÿé€šä¿®æ­£å…³ç³»è®¤çŸ¥ï¼Œä¾‹å¦‚éœ€æ±‚è¡¨è¾¾ã€é¢„æœŸæ ¡å‡†ä¸æƒ…ç»ªåé¦ˆã€‚è‹¥å¤„ç†å¾—å½“ï¼Œå…³ç³»å¯é€æ­¥è¿›å…¥ä¸Šå‡é€šé“ã€‚

å±äºç£¨åˆä¸è§‚å¯Ÿå¹¶è¡Œé˜¶æ®µã€‚
`;

    if(score>=60) return `
æ„Ÿæƒ…èƒ½é‡åå¹³ç¨³ï¼Œæ—¢æ— æ˜æ˜¾é˜»åŠ›ï¼Œä¹Ÿç¼ºä¹æ¨è¿›åŠ¨åŠ›ã€‚äº’åŠ¨æ›´å¤šåœç•™åœ¨è¡¨å±‚ï¼Œæ·±åº¦è¿æ¥ä»éœ€æ—¶é—´åŸ¹å…»ã€‚

å»ºè®®å‡å°‘æƒ…ç»ªå†…è€—ï¼Œé€šè¿‡ç¨³å®šé™ªä¼´ä¸ç°å®äº’åŠ¨ç§¯ç´¯ä¿¡ä»»ï¼Œè€Œéæ€¥äºå®šä¹‰å…³ç³»ã€‚

å±äºç¼“æ…¢ç§¯ç´¯æœŸã€‚
`;

    return `
å§»ç¼˜è¿åŠ¿å¤„åœ¨æ”¶æ•›åŒºé—´ï¼Œæ›´åƒæ˜¯æƒ…ç»ªæ•´ç†ä¸å…³ç³»æ¨¡å¼å¤ç›˜é˜¶æ®µã€‚æ­¤æ—¶æ¨è¿›å…³ç³»å¾€å¾€é˜»åŠ›è¾ƒå¤§ï¼Œå®¹æ˜“å› æœŸå¾…è½å·®äº§ç”Ÿå‹åŠ›ã€‚

å»ºè®®æŠŠé‡å¿ƒæ”¾åœ¨è‡ªæˆ‘çŠ¶æ€è°ƒæ•´ï¼Œä¾‹å¦‚æƒ…ç»ªç¨³å®šã€è¾¹ç•Œé‡å»ºä¸è¿‡å¾€ç»éªŒåæ€ã€‚å½“å†…åœ¨ç¨³å®šåº¦æå‡åï¼Œå…³ç³»è‡ªç„¶æ›´æ˜“è¿›å…¥è‰¯æ€§å¾ªç¯ã€‚
`;
  }

  /* ===== å­¦æœ¯ ===== */
  if(domain==="academic"){

    if(score>=90) return `
å­¦æœ¯èƒ½é‡å¤„åœ¨é«˜å³°è¾“å‡ºåŒºï¼Œæ˜¯å…¸å‹æˆæœçˆ†å‘çª—å£ã€‚ä¸“æ³¨åº¦ã€æ‰§è¡ŒåŠ›ä¸çµæ„ŸåŒæ­¥æå‡ï¼Œé€‚åˆå†²åˆºé«˜éš¾åº¦ä»»åŠ¡ä¸å…³é”®èŠ‚ç‚¹äº§å‡ºã€‚

ä¼˜å…ˆæ¨è¿›è®ºæ–‡å†™ä½œã€é¡¹ç›®æ”¶å°¾æˆ–å®éªŒéªŒè¯ï¼ŒæŠŠé˜¶æ®µæ€§æˆæœå¿«é€Ÿå›ºåŒ–ã€‚åŒæ—¶æ³¨æ„èŠ‚å¥ç®¡ç†ï¼Œé¿å…é«˜å¼ºåº¦é€æ”¯å¯¼è‡´åæœŸå›è½ã€‚

å±äºäº§å‡ºæ•ˆç‡æé«˜é˜¶æ®µã€‚
`;

    if(score>=80) return `
å­¦æœ¯è¿åŠ¿è¿›å…¥æ˜æ˜¾ä¸Šå‡åŒºé—´ï¼Œå­¦ä¹ æ•ˆç‡ä¸ç†è§£æ·±åº¦å‡æœ‰æ‰€æå‡ã€‚é€‚åˆé›†ä¸­å¤„ç†å¤æ‚è¯¾é¢˜æˆ–ç»“æ„æ€§éš¾é¢˜ã€‚

é€šè¿‡é˜¶æ®µç›®æ ‡æ‹†è§£ä¸æˆæœå¯¼å‘æ¨è¿›ï¼Œå¯æ˜¾è‘—æ”¾å¤§æ•ˆç‡ä¼˜åŠ¿ã€‚åªè¦ç»´æŒç¨³å®šä½œæ¯ï¼Œäº§å‡ºè´¨é‡ä¼šæŒç»­æå‡ã€‚

å±äºå†²åˆºä¸ç§¯ç´¯å¹¶è¡ŒæœŸã€‚
`;

    if(score>=70) return `
å½“å‰å­¦æœ¯èŠ‚å¥ç¨³æ­¥æ¨è¿›ï¼Œé€‚åˆåŸºç¡€å¤¯å®ä¸æ–¹æ³•è®ºä¼˜åŒ–ã€‚å¯¹çŸ¥è¯†ç»“æ„æ¢³ç†ã€æ–‡çŒ®å¤ç›˜ä¸æŠ€èƒ½è¡¥å¼ºå°¤ä¸ºæœ‰åˆ©ã€‚

åªè¦æŒç»­æŠ•å…¥ï¼Œåç»­è¿›å…¥é«˜äº§å‡ºåŒºæ¦‚ç‡è¾ƒå¤§ã€‚
`;

    if(score>=60) return `
å­¦ä¹ çŠ¶æ€åå¹³ç¨³ï¼Œæ•ˆç‡å­˜åœ¨æ³¢åŠ¨ä½†ä»å¯ç»´æŒæ¨è¿›ã€‚å»ºè®®é€šè¿‡æ¸…å•åŒ–ä»»åŠ¡ä¸å›ºå®šå­¦ä¹ æ—¶æ®µå»ºç«‹ç¨³å®šèŠ‚å¥ã€‚

å±äºæ¢å¤ä¸è“„åŠ›é˜¶æ®µã€‚
`;

    return `
å­¦æœ¯èƒ½é‡åä½ï¼Œæ›´é€‚åˆèŠ‚å¥é‡å»ºè€Œéé«˜å‹å†²åˆºã€‚æ³¨æ„åŠ›åˆ†æ•£ä¸ç–²åŠ³æ„Ÿè¾ƒæ˜æ˜¾ï¼Œå¼ºè¡Œæ¨è¿›åè€Œé™ä½æ•ˆç‡ã€‚

å»ºè®®ä»ä½œæ¯ä¸ç¯å¢ƒå…¥æ‰‹ï¼Œé€æ­¥æ¢å¤ä¸“æ³¨èƒ½åŠ›ã€‚
`;
  }

  /* ===== è´¢è¿ ===== */
  if(domain==="wealth"){

    if(score>=90) return `
è´¢è¿å¤„åœ¨èµ„æºé«˜åº¦æµåŠ¨æœŸï¼Œæœºä¼šå¯†åº¦ä¸æ”¶ç›Šæ½œåŠ›å‡è¾ƒé«˜ã€‚æ— è®ºæ˜¯æŠ•èµ„ã€åˆä½œè¿˜æ˜¯æ”¶å…¥ç»“æ„ä¼˜åŒ–ï¼Œéƒ½æ›´æ˜“å‡ºç°æ­£å‘å›æŠ¥ã€‚

ä½†æœºä¼šå¢åŠ åŒæ—¶æ„å‘³ç€é£é™©å¹¶å­˜ã€‚å»ºè®®è®¾å®šæ˜ç¡®èµ„é‡‘è¾¹ç•Œä¸é£é™©æ§åˆ¶çº¿ï¼Œé¿å…å› è¿‡åº¦è‡ªä¿¡æ‰©å¤§æ³¢åŠ¨ã€‚

å±äºæ‰©å¼ ä¸é…ç½®çª—å£æœŸã€‚
`;

    if(score>=80) return `
è´¢è¿è¿›å…¥å¢é•¿åŒºé—´ï¼Œæ”¶å…¥æˆ–æœºä¼šæ¥æºé€æ­¥å¢åŠ ã€‚é€‚åˆæ¨è¿›ç»“æ„ä¼˜åŒ–ï¼Œä¾‹å¦‚èµ„äº§é…ç½®æˆ–æŠ€èƒ½æŠ•èµ„ã€‚

ä¿æŒé¢„ç®—ä¸é£é™©æ§åˆ¶ï¼Œå¯å®ç°ç¨³æ­¥ç´¯ç§¯ã€‚
`;

    if(score>=70) return `
è´¢åŠ¡èŠ‚å¥ç¨³å®šï¼Œæ”¶ç›Šä¸æ”¯å‡ºåŸºæœ¬å¹³è¡¡ã€‚æ›´é€‚åˆç¨³å¥ç†è´¢ä¸ç°é‡‘æµç®¡ç†ï¼Œè€Œéæ¿€è¿›æ‰©å¼ ã€‚
`;

    if(score>=60) return `
è´¢è¿åä¿å®ˆï¼Œèµ„æºæµåŠ¨æ€§æœ‰é™ã€‚å»ºè®®å‡å°‘éå¿…è¦å¼€æ”¯ï¼Œä¼˜å…ˆå»ºç«‹å®‰å…¨å‚¨å¤‡ã€‚
`;

    return `
è´¢åŠ¡èƒ½é‡æ”¶æ•›ï¼Œæ”¯å‡ºå‹åŠ›å¯èƒ½ä¸Šå‡ã€‚æ­¤é˜¶æ®µå®œæ”¶ç¼©ä¸é˜²å®ˆï¼Œé¿å…é«˜é£é™©å†³ç­–ã€‚
`;
  }

  /* ===== å¥åº· ===== */
  if(domain==="health"){

    if(score>=90) return `
å¥åº·èƒ½é‡å¤„åœ¨é«˜æ¢å¤ä¸é«˜ç¨³å®šåŒºï¼Œä½“èƒ½ä¸ç²¾ç¥çŠ¶æ€å‡è¡¨ç°è‰¯å¥½ã€‚é€‚åˆç»´æŒè®­ç»ƒèŠ‚å¥æˆ–æ¨è¿›ä½“èƒ½ç›®æ ‡ã€‚

åªè¦ä¿æŒè§„å¾‹ä½œæ¯ä¸è¿åŠ¨ï¼Œæ•´ä½“çŠ¶æ€å¯é•¿æœŸç¨³å®šã€‚
`;

    if(score>=80) return `
å¥åº·çŠ¶æ€è‰¯å¥½ï¼Œæ¢å¤åŠ›ä¸æŠ—å‹æ€§è¾ƒå¼ºã€‚é€‚åˆè½»åº¦å¼ºåŒ–è®­ç»ƒä¸ç”Ÿæ´»èŠ‚å¥ä¼˜åŒ–ã€‚
`;

    if(score>=70) return `
èº«ä½“çŠ¶æ€å¹³ç¨³ï¼Œæ— æ˜æ˜¾é£é™©ï¼Œä½†éœ€æ³¨æ„ä½œæ¯è§„å¾‹ä¸å‹åŠ›ç®¡ç†ã€‚
`;

    if(score>=60) return `
å¥åº·èƒ½é‡ç•¥æœ‰æ³¢åŠ¨ï¼Œå®¹æ˜“ç–²åŠ³æˆ–ç¡çœ ä¸è¶³ã€‚å»ºè®®ä¼˜å…ˆè°ƒæ•´ä½œæ¯ã€‚
`;

    return `
å¥åº·è¿åŠ¿åå¼±ï¼Œæ›´é€‚åˆæ¢å¤ä¸ä¿®æ•´ã€‚å‡å°‘é«˜å‹å®‰æ’ï¼Œä¼˜å…ˆä¿è¯ä¼‘æ¯ã€‚
`;
  }

  return "æŒ‰èŠ‚å¥æ¨è¿›å³å¯ã€‚";
}

function renderBars(scores){
  const items = [
    ["å§»ç¼˜", "love", scores.love],
    ["å­¦æœ¯å‰é€”", "academic", scores.academic],
    ["è´¢è¿", "wealth", scores.wealth],
    ["å¥åº·", "health", scores.health]
  ];
  return `
    <div class="grid">
      ${items.map(([cn,key,val])=>`
        <div class="kpi">
          <b>${cn}</b>
          <div class="score">${val}</div>
          <div class="bar"><div style="width:${val}%"></div></div>
          <div class="muted" style="margin-top:8px;">å»ºè®®ï¼š${advice(val, key)}</div>
        </div>
      `).join("")}
    </div>
  `;
}

function draw(){
  const spread = document.getElementById("spread").value;
  const focus = document.getElementById("focus").value;

  let cards=[], weights=[];
  if(spread==="one"){
    cards = [pickCard()];
    weights = [1];
  }else{
    cards = [pickCard(), pickCard(), pickCard()];
    weights = [0.25, 0.5, 0.25]; // è¿‡å»/ç°åœ¨/æœªæ¥
  }

  const scores = weightedAvg(cards, weights);

  const cardHtml = cards.map((c,i)=>{
    const pos = spread==="three" ? (i===0?"è¿‡å»":i===1?"ç°åœ¨":"æœªæ¥") : "æœ¬æ¬¡";
    return `
      <div class="card">
        <div><b>${pos}ï¼š</b>${c.name}<span class="pill">${c.reversed?"é€†ä½":"æ­£ä½"}</span></div>
        <div class="muted" style="margin-top:8px;">${c.text}</div>
        <div class="mono" style="margin-top:8px;">æ˜ å°„åˆ†ï¼šlove ${c.base.love} | academic ${c.base.academic} | wealth ${c.base.wealth} | health ${c.base.health}</div>
      </div>
    `;
  }).join("");

  const r = document.getElementById("result");
  r.style.display="block";
  r.innerHTML = `
    <div><b>ä¾§é‡ï¼š</b>${focusLabel(focus)}ï¼ˆä»…å½±å“å‘ˆç°ï¼Œä¸å½±å“æŠ½ç‰Œï¼‰</div>
    <div class="hr"></div>
    <div><b>ç»¼åˆç»“æœï¼ˆå››é¡¹è¯„åˆ†ï¼‰</b></div>
    ${renderBars(scores)}
    <div class="hr"></div>
    <div><b>æŠ½åˆ°çš„ç‰Œ</b></div>
    ${cardHtml}
    <div class="hr"></div>
    <div class="muted">æç¤ºï¼šå¡”ç½—çš„éšæœºæ€§æ¥è‡ªæŠ½ç‰Œæœºåˆ¶ï¼›åˆ†æ•°ä¸å»ºè®®ç”±å›ºå®šç‰Œä¹‰ä¸æ˜ å°„è§„åˆ™ç”Ÿæˆã€‚</div>
  `;
}
</script>
</body>
</html>
